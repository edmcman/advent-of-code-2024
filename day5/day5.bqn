in â† â€¢file.Lines "input.txt"

Split â† {(<ğ•¨) ((âŠ¢-Ëœ+`Ã—Â¬)âˆ˜=âŠ”âŠ¢)Â¨ ğ•©}
ParseInt â† (10âŠ¸Ã—âŠ¸+ËœÂ´âˆ˜âŒ½-âŸœ'0')



emptylines â† in â‰¡Â¨ <""
groupindices â† (2Ã—emptylines) -Ëœ +` emptylines
parsed â† {
    groups â† groupindicesâŠ”in
    orderings â‡ ParseIntÂ¨ > ('|' Split âŠ‘groups)
    updates â‡ ParseIntÂ¨Â¨ ',' Split 1âŠ‘groups
}


# x_w means X must come before W
IsPairOK â† {Â¬ ğ•©â€¿ğ•¨ âˆŠ parsed.orderings}
CanComeBefore â† IsPairOK

ListThing â† >âŒœËœ âˆ˜ â†•â‰ 
IsUpdateOK â† {âˆ§Â´â¥Š(ListThing ğ•©) âˆ¨ (>IsPairOKâŒœËœ ğ•©)}

Middle â† {(âŒŠ2 Ã·Ëœ â‰ ğ•©) âŠ‘ ğ•©}

part1 â† +Â´ MiddleÂ¨ (IsUpdateOKÂ¨ parsed.updates) / parsed.updates
â€¢Show part1

SortOneUpdate â† { (â’ >(âˆ¾âŒœËœ ğ•©) âˆŠÂ¨ <parsed.orderings) âŠ ğ•©}

#â€¢Show 53â€¿13 âˆŠ parsed.orderings

#part2 â† SortOneUpdateÂ¨ parsed.updates
part2 â† +Â´ MiddleÂ¨ SortOneUpdateÂ¨ (Â¬ IsUpdateOKÂ¨ parsed.updates) / parsed.updates
â€¢Show part2
#â€¢Show SortOneUpdate â†‘ parsed.updates